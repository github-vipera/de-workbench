{"version":3,"file":"UIModalPrompt.js","sourceRoot":"","sources":["../../src/ui-components/UIModalPrompt.ts"],"names":[],"mappings":"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","sourcesContent":["'use babel'\n\n/*!\n* Dynamic Engine Workbench\n* Copyright(c) 2017 Dynamic Engine Team @ Vipera Plc\n* MIT Licensed\n*/\n\n\nimport {\n createText,\n createElement,\n insertElement,\n createGroupButtons,\n createButton,\n createIcon,\n createIconFromPath,\n attachEventFromObject,\n createTextEditor\n} from '../element/index';\nimport { UIInputFormElement } from './UIInputFormElement'\nimport { EventEmitter }  from 'events'\nconst { CompositeDisposable } = require('atom');\n\nexport class UIModalPrompt {\n\n  container:HTMLElement;\n  events:EventEmitter;\n  inputEl:HTMLElement;\n  placeholder:string;\n  value:string;\n  panel:any;\n  onConfirmCallback:Function;\n  onCancelCallback:Function;\n  subscriptions:any;\n\n  constructor(){\n    this.events = new EventEmitter();\n  }\n\n  protected createEditor(value, placeholder){\n    let inputEl = createElement('input',{\n      className : 'input-text'\n    })\n    inputEl.setAttribute('placeholder', placeholder)\n    inputEl.value = value\n    inputEl.setSelectionRange(0, value.length)\n    return inputEl;\n  }\n\n  public addEventListener(event:string, listener){\n    this.events.addListener(event, listener);\n  }\n\n  public removeEventListener(event:string, listener){\n    this.events.removeListener(event, listener);\n  }\n\n  public destroy(){\n    this.events.removeAllListeners();\n    this.panel = null;\n  }\n\n  public show(value:string, placeholder:string, onConfirmCallback:Function, onCancelCallback:Function){\n    this.subscriptions = new CompositeDisposable();\n    this.subscriptions.add(atom.commands.add('atom-workspace', {\n      'core:cancel': () => this.doCancel()\n    }));\n\n    this.onConfirmCallback = onConfirmCallback;\n    this.onCancelCallback = onCancelCallback;\n    this.placeholder = placeholder;\n    this.value = value;\n    this.inputEl = this.createEditor(value, placeholder);\n    this.inputEl.addEventListener('keydown',(evt)=>{\n      evt.stopPropagation()\n      if (evt.keyCode===13){\n        this.doConfirm()\n      } else if  (evt.keyCode===27){\n        this.doCancel()\n      }\n    })\n    let spacer = createElement('div',{});\n    spacer.style.height = \"10px\"\n    this.container = createElement('div',{\n      elements: [this.inputEl, spacer, createText('Press Esc to cancel')],\n    })\n    this.container.style[\"padding-left\"] = \"10px\"\n    this.container.style[\"padding-right\"] = \"10px\"\n\n    let modalConfig = {\n      item: this.container\n    }\n    modalConfig['className'] = 'de-workbench-modal'\n\n\n    this.panel = atom.workspace.addModalPanel(modalConfig);\n    this.inputEl.focus();\n  }\n\n  protected doConfirm(){\n    let txtValue = this.inputEl[\"value\"];//[\"getModel\"]().getText();\n    this.closePanel();\n    this.onConfirmCallback(txtValue);\n  }\n\n  protected doCancel(){\n    this.closePanel();\n    this.onCancelCallback();\n  }\n\n  protected closePanel(){\n    this.panel.hide();\n    this.panel.destroy();\n    this.panel = null;\n    this.container.remove();\n    this.container = null;\n    this.subscriptions.dispose();\n  }\n\n\n}\n"]}