{"version":3,"file":"UIExtendedListView.js","sourceRoot":"","sources":["../../src/ui-components/UIExtendedListView.ts"],"names":[],"mappings":"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","sourcesContent":["'use babel'\n\n/*!\n * Dynamic Engine Workbench\n * Copyright(c) 2017 Dynamic Engine Team @ Vipera Plc\n * MIT Licensed\n */\n import {\n   createText,\n   createInput,\n   createElement,\n   insertElement,\n   createGroupButtons,\n   createButton,\n   createIcon,\n   createIconFromPath,\n   attachEventFromObject,\n   createTextEditor\n } from '../element/index';\n\nimport { UIComponent, UIBaseComponent } from './UIComponent'\nimport { UIListView, UIListViewModel } from './UIListView'\n\nconst remote = require('remote');\nconst $ = require(\"jquery\")\n\nexport interface UIExtendedListViewValidationResult {\n  validationStatus:boolean;\n  validationErrorMessage:string;\n  showValidationError:boolean;\n}\n\nexport interface UIExtendedListViewModel extends UIListViewModel {\n    isCellEditable(row:number, col:number):boolean;\n    onValueChanged(row:number, col:number, value:any);\n    onEditValidation(row:number, col:number, value:any):UIExtendedListViewValidationResult;\n}\n\nexport class UIExtendedListView extends UIListView {\n\n  private selectedCell:HTMLElement;\n  private selectedRow:HTMLElement;\n  private extendedModel:UIExtendedListViewModel;\n  private editorEl:HTMLElement;\n  private editing:boolean;\n  private cellSelectable:boolean=true;\n\n  private validationErrorOverlay:HTMLElement;\n\n  constructor(model:UIExtendedListViewModel){\n    super(model);\n    this.extendedModel = model;\n    this.extendedModel.addEventListener('didModelChanged',()=>{\n      this.modelChanged()\n    })\n  }\n\n  protected buildUI(){\n    super.buildUI();\n\n    this.editorEl = this.createEditor();\n    insertElement(this.mainElement, this.editorEl);\n\n    this.validationErrorOverlay = this.createValidationErrorOverlay();\n    insertElement(this.mainElement, this.validationErrorOverlay);\n  }\n\n  protected createEditor():HTMLElement{\n    let editorEl = createTextEditor({});\n    editorEl.style.position = \"absolute\"\n    editorEl.style.visibility = \"hidden\"\n    editorEl.classList.add(\"de-workbench-listview-tb-editor\")\n    editorEl.classList.add(\"nativenative-key-bindings\")\n    editorEl.addEventListener('keydown',(evt)=>{\n      if (evt.keyCode===13){ //ENTER\n        this.commitEditing();\n      }\n      if (evt.keyCode===27){ //ESC\n        this.cancelEditing();\n      }\n    })\n    return editorEl;\n  }\n\n  protected createValidationErrorOverlay():HTMLElement {\n      let el = createElement('div',{\n        elements: [\n          createText(\"Validation Error\")\n        ],\n        className: 'de-workbench-listview-tb-editor-validation-error'\n      })\n      el.style.position = \"absolute\"\n      el.style.visibility = \"hidden\"\n      return el;\n  }\n\n  protected tableReady(table:HTMLElement){\n    super.tableReady(table)\n\n    if (!table.getAttribute(\"tabindex\")){\n      table.setAttribute(\"tabindex\", \"0\")\n    }\n\n    //add event listeners for selection and editing\n    $(table).on('click',(evt)=>{\n      evt.preventDefault()\n      if (this.isEditing()){\n        if (this.commitEditing()){\n          this.selectCell(evt.target);\n        }\n      } else {\n        this.selectCell(evt.target);\n      }\n    })\n\n    $(table).on('dblclick',(evt)=>{\n      evt.preventDefault()\n      this.selectCell(evt.target);\n      this.manageCellEdit(this.selectedCell);\n    })\n\n    window.addEventListener('resize', ()=> {\n      if (this.isEditing()){\n        this.moveEditor(this.selectedCell);\n      }\n    });\n\n    $(table).keydown((evt)=>{\n      //console.log(\"Navigation required\")\n      this.navigateTableWithKeyboard(evt.which)\n    })\n\n    $(table).focusout(()=>{\n      this.removeCurrentSelection();\n    })\n\n  }\n\n  protected navigateTableWithKeyboard(key:number){\n    console.log(\"navigateTableWithKeyboard \" , key)\n    if (key == 39) {\n        // Right Arrow\n        this.navigateRight();\n    } else if (key == 37) {\n        // Left Arrow\n        this.navigateLeft()\n    } else if (key == 38) {\n        // Up Arrow\n        this.navigateUp();\n    } else if (key == 40) {\n        // Down Arrow\n        this.navigateDown()\n    } else if (key == 13) {\n        // Enter\n        this.manageCellEdit(this.selectedCell);\n    } else if (key == 27) {\n        // ESC\n        if (this.isEditing()){\n          this.cancelEditing()\n        }\n    }\n  }\n\n  protected navigateRight(){\n    console.log(\"Navigate right\")\n    if (!this.selectedCell){\n      return;\n    }\n    let c = $(this.selectedCell).next();\n    if (c && c[0]){\n      this.selectCell(c[0]);\n    }\n  }\n\n  protected navigateLeft(){\n    console.log(\"Navigate left\")\n    if (!this.selectedCell){\n      return;\n    }\n    let c = $(this.selectedCell).prev();\n    if (c && c[0]){\n      this.selectCell(c[0]);\n    }\n  }\n\n  protected navigateDown(){\n    console.log(\"Navigate down\")\n    if (!this.selectedCell){\n      return;\n    }\n    let c = $(this.selectedCell).closest('tr').next().find('td:eq(' + $(this.selectedCell).index() + ')');\n    if (c && c[0]){\n      this.selectCell(c[0]);\n    }\n  }\n\n  protected navigateUp(){\n    console.log(\"Navigate up\")\n    if (!this.selectedCell){\n      return;\n    }\n    let c = $(this.selectedCell).closest('tr').prev().find('td:eq(' + $(this.selectedCell).index() + ')');\n    if (c && c[0]){\n      this.selectCell(c[0]);\n    }\n  }\n\n  protected removeCurrentSelection(){\n    if (this.selectedCell){\n      //remove current selection\n      this.selectedCell.classList.remove(\"selected\")\n    }\n  }\n\n  protected selectCell(cell:HTMLElement){\n    if (this.cellSelectable){\n      this.removeCurrentSelection();\n      cell.classList.add(\"selected\")\n      this.selectedCell = cell;\n\n      let row = this.getSelectedRow();\n      if (row>-1){\n        this.selectRow(row)\n      }\n    }\n  }\n\n  protected selectRow(row){\n    if (this.selectedRow){\n      this.selectedRow.classList.remove(\"selected\")\n    }\n    let elements = $(this.tableElement).find(\"[trow=\"+row+\"]\")\n    if (elements && elements.length==1){\n      let rowEl:HTMLElement = elements[0]\n      console.log(\"Row element: \", rowEl)\n      rowEl.classList.add(\"selected\")\n      this.selectedRow = rowEl;\n    }\n  }\n\n  public getSelectedRow():number{\n    if (this.selectedCell){\n        let row = this.selectedCell.getAttribute('row')\n        return parseInt(row)\n    } else {\n      return -1;\n    }\n  }\n\n  public getSelectedColumn():number{\n    if (this.selectedCell){\n        let col = this.selectedCell.getAttribute('col')\n        return parseInt(col)\n    } else {\n      return -1;\n    }\n  }\n\n  protected manageCellEdit(cell:HTMLElement){\n    let row = this.getSelectedRow()\n    let col = this.getSelectedColumn()\n    if (this.extendedModel.isCellEditable(row, col)){\n      this.startEditing(row, col, cell)\n    }\n  }\n\n  protected startEditing(row:number, col:number,cell:HTMLElement){\n    this.prepareEditor(row,col, cell)\n    this.editorEl.style.visibility = \"visible\"\n    this.editorEl.focus()\n    this.editing = true\n    $(this.editorEl).focusout(()=>{\n      this.commitEditing();\n    })\n  }\n\n  protected prepareEditor(row:number, col:number,cell:HTMLElement){\n      this.moveEditor(cell);\n      this.editorEl['getModel']().setText(cell.innerText);\n      this.editorEl['getModel']().selectAll();\n      return this.editorEl;\n  }\n\n  protected moveEditor(cell:HTMLElement){\n    let width = cell.offsetWidth-2;\n    let height = cell.offsetHeight-2;\n    this.editorEl.style.width = width + \"px\"\n    this.editorEl.style.height = height +\"px\"\n\n    let offset = $(cell).offset()\n    offset.top += 1\n    offset.left += 1\n    $(this.editorEl).offset(offset)\n\n\n    $(this.validationErrorOverlay).offset({\n      top: (offset.top-19),\n      left: (offset.left-2)\n    });\n    this.validationErrorOverlay.style.width = (width-40) + \"px\"\n  }\n\n  protected commitEditing():boolean{\n    console.log('commit!')\n\n    let value = this.editorEl[\"getModel\"]().getText();\n    let row = this.getSelectedRow()\n    let col = this.getSelectedColumn()\n    let validationResult = this.extendedModel.onEditValidation(row, col, value);\n    if (!validationResult.validationStatus){\n      if (validationResult.showValidationError){\n        //display overlay with error\n        this.showValidationError(validationResult.validationErrorMessage)\n      }\n      return false;\n    }\n\n    this.editorEl.style.visibility = \"hidden\"\n    $(this.editorEl).off('focusout')\n    this.editing = false\n\n    this.extendedModel.onValueChanged(row,col,value);\n    this.tableElement.focus()\n\n    return true;\n  }\n\n  protected cancelEditing(){\n    console.log('cancel!')\n    this.hideValidationError();\n    this.editorEl.style.visibility = \"hidden\"\n    $(this.editorEl).off('focusout')\n    this.editing = false\n    this.tableElement.focus()\n  }\n\n  public isEditing():boolean {\n    return this.editing\n  }\n\n  protected showValidationError(errorMessage:string){\n    this.validationErrorOverlay.innerText = errorMessage\n    this.validationErrorOverlay.style.visibility = \"visible\"\n    this.selectedCell.classList.add(\"validation-error\")\n  }\n\n  protected hideValidationError(){\n    this.validationErrorOverlay.style.visibility = \"hidden\"\n    this.selectedCell.classList.remove(\"validation-error\")\n  }\n\n  public isCellSelectable():boolean {\n    return this.cellSelectable;\n  }\n\n  public setCellSelectable(value:boolean):UIExtendedListView{\n    this.cellSelectable = value;\n    return this;\n  }\n\n}\n"]}