{"version":3,"file":"CommunityPluginsView.js","sourceRoot":"","sources":["../../../../src/views/ProjectSettings/plugins/CommunityPluginsView.ts"],"names":[],"mappings":"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","sourcesContent":["'use babel'\n\n/*!\n * Dynamic Engine Workbench\n * Copyright(c) 2017 Dynamic Engine Team @ Vipera Plc\n * MIT Licensed\n */\n\n import {\n   createText,\n   createElement,\n   insertElement,\n   createGroupButtons,\n   createButton,\n   createIcon,\n   createIconFromPath,\n   attachEventFromObject,\n   createTextEditor,\n   createButtonSpacer\n } from '../../../element/index';\n\nconst _ = require(\"lodash\");\nconst $ = require ('JQuery');\n\nimport { ProjectManager } from '../../../DEWorkbench/ProjectManager'\nimport { Cordova, CordovaPlatform, CordovaPlugin } from '../../../cordova/Cordova'\nimport { Logger } from '../../../logger/Logger'\nimport { UIPluginsList, UIPluginMetaButtons } from '../../../ui-components/UIPluginsList'\nimport { UITabbedView, UITabbedViewItem, UITabbedViewTabType } from '../../../ui-components/UITabbedView'\nimport { UIComponent, UIBaseComponent } from '../../../ui-components/UIComponent'\nimport { CordovaPluginsFinder } from '../../../cordova/CordovaPluginsFinder'\nimport { UIButtonGroup, UIButtonConfig, UIButtonGroupMode } from '../../../ui-components/UIButtonGroup'\nimport { UILineLoader } from '../../../ui-components/UILineLoader'\nimport { UINotifications } from '../../../ui-components/UINotifications'\nimport { EventBus } from '../../../DEWorkbench/EventBus'\n\nexport class CommunityPluginsView extends UIBaseComponent {\n\n  private pluginList: UIPluginsList;\n  private searchForm:HTMLElement;\n  private searchTextEditor:HTMLElement;\n\n  private btnGroupPlatformChooser: UIButtonGroup;\n  private btnChooseIOS:HTMLElement;\n  private btnChooseAndroid:HTMLElement;\n  private btnChooseBrowser:HTMLElement;\n\n  private lineLoader:UILineLoader;\n  private currentProjectRoot:string;\n\n  private queryResultsMessage:HTMLElement;\n\n  constructor(){\n    super();\n\n    this.currentProjectRoot = ProjectManager.getInstance().getCurrentProjectPath();\n\n    this.initUI();\n  }\n\n  protected initUI(){\n\n    // Subscribe interesting events\n    EventBus.getInstance().subscribe(EventBus.EVT_PLUGIN_ADDED, (eventData)=>{\n      // the first item in eventData is the project root\n      if (eventData[0]===this.currentProjectRoot){\n        this.submitSearch()\n      }\n    });\n    EventBus.getInstance().subscribe(EventBus.EVT_PLUGIN_REMOVED, (eventData)=>{\n      // the first item in eventData is the project root\n      if (eventData[0]===this.currentProjectRoot){\n        this.submitSearch()\n      }\n    });\n    // end event bus subscription\n\n    this.lineLoader = new UILineLoader()\n\n    // Editor Block\n    this.searchTextEditor = createElement('input',{\n      className: 'input-search native-key-bindings'\n    });\n    this.searchTextEditor[\"type\"] = \"search\";\n    this.searchTextEditor[\"placeholder\"] = \"Search a plugin\";\n    let blockEditor = createElement('div',{\n      elements: [\n        this.searchTextEditor\n      ],\n      className : 'block'\n    })\n\n\n    // Platform Chooser Block / Install manually\n    this.btnGroupPlatformChooser = new UIButtonGroup(UIButtonGroupMode.Toggle)\n        .addButton(new UIButtonConfig().setId('ios').setCaption('iOS').setSelected(true))\n        .addButton(new UIButtonConfig().setId('android').setCaption('Android').setSelected(true))\n        .addButton(new UIButtonConfig().setId('browser').setCaption('Browser').setSelected(true))\n        .addChangeListener((buttonConfig:UIButtonConfig)=>{\n          this.submitSearch();\n        });\n\n    this.queryResultsMessage = createElement('span',{\n      elements: [\n        createText(\"No plugins found\")\n      ],\n      className: 'de-workbench-community-plugins-query-results'\n    });\n    this.setQueryResultMessage(null);\n    // End Platform Chooser Block / Install manually\n\n\n    let blockPlatformChooser = createElement('div',{\n      elements: [\n        this.btnGroupPlatformChooser.element(),\n        createButtonSpacer(),\n        /*btnManualInstall,*/\n        this.queryResultsMessage\n      ],\n      className : 'block'\n    })\n\n    // Search Form\n    this.searchForm = createElement('div',{\n        elements : [\n          blockEditor,\n          blockPlatformChooser\n        ],\n        className: 'de-workbench-community-plugins-search-form'\n    });\n\n    // Plugins list\n    this.pluginList = new UIPluginsList().addEventListener('didActionRequired',(pluginInfo, actionType)=>{\n      if (actionType===UIPluginMetaButtons.BTN_TYPE_INSTALL){\n        this.doInstallPlugin(pluginInfo)\n      }\n      else if (actionType===UIPluginMetaButtons.BTN_TYPE_UNINSTALL){\n        this.doUninstallPlugin(pluginInfo)\n      } else {\n        Logger.getInstance().warn(\"Action unknwon \" + actionType)\n      }\n    });\n\n    // Main element\n    this.mainElement = createElement('div',{\n        elements : [\n          this.searchForm,\n          this.pluginList.element(),\n          this.lineLoader.element()\n        ],\n        className: 'de-workbench-community-plugins-list'\n    })\n\n    this.showProgress(false);\n\n    //Add event listeners\n    this.searchTextEditor.addEventListener('keypress',(evt)=>{\n      if (evt.which == 13){\n        this.submitSearch();\n      }\n    });\n\n    $('[platform-select]').click(function(evt){\n      $(evt.currentTaget).toggleClass(\"selected\");\n    });\n  }\n\n  private doInstallPlugin(pluginInfo){\n    this.showProgress(true)\n    this.pluginList.setPluginInstallPending(pluginInfo, true);\n    ProjectManager.getInstance().cordova.addPlugin(this.currentProjectRoot, pluginInfo).then(()=>{\n      UINotifications.showInfo(\"Plugin \"+pluginInfo.name +\" installed successfully.\")\n      this.showProgress(false)\n      this.pluginList.setPluginInstallPending(pluginInfo, false);\n    }).catch(()=>{\n      UINotifications.showError(\"Error installing plugin \"+pluginInfo.name +\". See the log for more details.\")\n      this.showProgress(false)\n      this.pluginList.setPluginInstallPending(pluginInfo, false);\n    })\n  }\n\n  private doUninstallPlugin(pluginInfo){\n    this.showProgress(true)\n    this.pluginList.setPluginUInstallPending(pluginInfo, true);\n    ProjectManager.getInstance().cordova.removePlugin(this.currentProjectRoot, pluginInfo).then(()=>{\n      UINotifications.showInfo(\"Plugin \"+pluginInfo.name +\" uninstalled successfully.\")\n      this.showProgress(false)\n      this.pluginList.setPluginUInstallPending(pluginInfo, false);\n    }).catch(()=>{\n      UINotifications.showError(\"Error uninstalling plugin \"+pluginInfo.name +\". See the log for more details.\")\n      this.showProgress(false)\n      this.pluginList.setPluginUInstallPending(pluginInfo, false);\n    })\n  }\n\n  private setQueryResultMessage(count?:number){\n    if (!count){\n      //hide\n      this.queryResultsMessage.setAttribute('hidden','')\n    }\n    if (count>0){\n      //show green count\n      if (count==1){\n        this.queryResultsMessage.innerText = count + \" plugin found.\"\n      } else {\n        this.queryResultsMessage.innerText = count + \" plugins found.\"\n      }\n      this.queryResultsMessage.removeAttribute('hidden')\n      this.queryResultsMessage.setAttribute('queryres','1')\n    }\n    if (count==0){\n      //show red warn\n      this.queryResultsMessage.innerText = \"No plugins found.\"\n      this.queryResultsMessage.removeAttribute('hidden')\n      this.queryResultsMessage.setAttribute('queryres','0')\n    }\n  }\n\n  /**\n   * Submit the search to the npm registry\n   */\n  private submitSearch(){\n    let cpf = new CordovaPluginsFinder();\n    let names = '';\n\n    let platforms = this.btnGroupPlatformChooser.getSelectedButtons();\n    let search = this.searchTextEditor[\"value\"];\n    if (search.length==0 || platforms.length==0){\n      return;\n    }\n    this.showProgress(true);\n    let keywords = _.split(search, ' ');\n\n    cpf.search(keywords,keywords,platforms).then((results:Array<CordovaPlugin>)=>{\n\n      ProjectManager.getInstance().cordova.getInstalledPlugins(this.currentProjectRoot).then((installedPlugins:Array<CordovaPlugin>)=>{\n        //re-process for already installed plugins\n        let processedResults:Array<CordovaPlugin> = ProjectManager.getInstance().cordova.markInstalledPlugins(results, installedPlugins);\n        this.pluginList.setPlugins(processedResults);\n        Logger.getInstance().debug(\"Plugins found:\", processedResults)\n        console.log(\"Plugins found:\", processedResults)\n      });\n\n\n      this.setQueryResultMessage(results.length)\n\n      this.showProgress(false);\n    }, (err)=>{\n      alert(\"Error: \" + err);\n\n      this.setQueryResultMessage(null)\n\n      this.showProgress(false);\n    });\n\n  }\n\n  /*\n   * Show/Hide progress bar\n   */\n  private showProgress(show:boolean){\n    this.lineLoader.setOnLoading(show);\n  }\n\n  public destroy(){\n    this.pluginList.destroy()\n    this.btnGroupPlatformChooser.destroy()\n    super.destroy()\n  }\n}\n"]}